{
  "version": 3,
  "sources": ["../../../../src/lib/tools/SelectTool/SelectTool.ts"],
  "sourcesContent": ["import { StateNode, TLStateNodeConstructor, react } from '@tldraw/editor'\nimport { Brushing } from './childStates/Brushing'\nimport { Crop } from './childStates/Crop/Crop'\nimport { Cropping } from './childStates/Crop/children/Cropping'\nimport { PointingCropHandle } from './childStates/Crop/children/PointingCropHandle'\nimport { DraggingHandle } from './childStates/DraggingHandle'\nimport { EditingShape } from './childStates/EditingShape'\nimport { Idle } from './childStates/Idle'\nimport { PointingArrowLabel } from './childStates/PointingArrowLabel'\nimport { PointingCanvas } from './childStates/PointingCanvas'\nimport { PointingHandle } from './childStates/PointingHandle'\nimport { PointingResizeHandle } from './childStates/PointingResizeHandle'\nimport { PointingRotateHandle } from './childStates/PointingRotateHandle'\nimport { PointingSelection } from './childStates/PointingSelection'\nimport { PointingShape } from './childStates/PointingShape'\nimport { Resizing } from './childStates/Resizing'\nimport { Rotating } from './childStates/Rotating'\nimport { ScribbleBrushing } from './childStates/ScribbleBrushing'\nimport { Translating } from './childStates/Translating'\n\n/** @public */\nexport class SelectTool extends StateNode {\n\tstatic override id = 'select'\n\tstatic override initial = 'idle'\n\treactor: undefined | (() => void) = undefined\n\n\tstatic override children = (): TLStateNodeConstructor[] => [\n\t\tCrop,\n\t\tCropping,\n\t\tIdle,\n\t\tPointingCanvas,\n\t\tPointingShape,\n\t\tTranslating,\n\t\tBrushing,\n\t\tScribbleBrushing,\n\t\tPointingCropHandle,\n\t\tPointingSelection,\n\t\tPointingResizeHandle,\n\t\tEditingShape,\n\t\tResizing,\n\t\tRotating,\n\t\tPointingRotateHandle,\n\t\tPointingArrowLabel,\n\t\tPointingHandle,\n\t\tDraggingHandle,\n\t]\n\n\t// We want to clean up the duplicate props when the selection changes\n\tprivate cleanUpDuplicateProps = () => {\n\t\tconst selectedShapeIds = this.editor.getSelectedShapeIds()\n\t\tconst instance = this.editor.getInstanceState()\n\t\tif (!instance.duplicateProps) return\n\t\tconst duplicatedShapes = new Set(instance.duplicateProps.shapeIds)\n\t\tif (\n\t\t\tselectedShapeIds.length === duplicatedShapes.size &&\n\t\t\tselectedShapeIds.every((shapeId) => duplicatedShapes.has(shapeId))\n\t\t) {\n\t\t\treturn\n\t\t}\n\t\tthis.editor.updateInstanceState({\n\t\t\tduplicateProps: null,\n\t\t})\n\t}\n\n\toverride onEnter = () => {\n\t\tthis.reactor = react('clean duplicate props', () => {\n\t\t\ttry {\n\t\t\t\tthis.cleanUpDuplicateProps()\n\t\t\t} catch (e) {\n\t\t\t\tif (typeof process !== 'undefined' && process.env.NODE_ENV === 'test') {\n\t\t\t\t\t// ignore errors at test time\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(e)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\toverride onExit = () => {\n\t\tthis.reactor?.()\n\t\tif (this.editor.getCurrentPageState().editingShapeId) {\n\t\t\tthis.editor.setEditingShape(null)\n\t\t}\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAyD;AACzD,sBAAyB;AACzB,kBAAqB;AACrB,sBAAyB;AACzB,gCAAmC;AACnC,4BAA+B;AAC/B,0BAA6B;AAC7B,kBAAqB;AACrB,gCAAmC;AACnC,4BAA+B;AAC/B,4BAA+B;AAC/B,kCAAqC;AACrC,kCAAqC;AACrC,+BAAkC;AAClC,2BAA8B;AAC9B,sBAAyB;AACzB,sBAAyB;AACzB,8BAAiC;AACjC,yBAA4B;AAGrB,MAAM,mBAAmB,wBAAU;AAAA,EACzC,OAAgB,KAAK;AAAA,EACrB,OAAgB,UAAU;AAAA,EAC1B,UAAoC;AAAA,EAEpC,OAAgB,WAAW,MAAgC;AAAA,IAC1D;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAAA;AAAA,EAGQ,wBAAwB,MAAM;AACrC,UAAM,mBAAmB,KAAK,OAAO,oBAAoB;AACzD,UAAM,WAAW,KAAK,OAAO,iBAAiB;AAC9C,QAAI,CAAC,SAAS;AAAgB;AAC9B,UAAM,mBAAmB,IAAI,IAAI,SAAS,eAAe,QAAQ;AACjE,QACC,iBAAiB,WAAW,iBAAiB,QAC7C,iBAAiB,MAAM,CAAC,YAAY,iBAAiB,IAAI,OAAO,CAAC,GAChE;AACD;AAAA,IACD;AACA,SAAK,OAAO,oBAAoB;AAAA,MAC/B,gBAAgB;AAAA,IACjB,CAAC;AAAA,EACF;AAAA,EAES,UAAU,MAAM;AACxB,SAAK,cAAU,qBAAM,yBAAyB,MAAM;AACnD,UAAI;AACH,aAAK,sBAAsB;AAAA,MAC5B,SAAS,GAAG;AACX,YAAI,OAAO,YAAY,eAAe,QAAQ,IAAI,aAAa,QAAQ;AAAA,QAEvE,OAAO;AACN,kBAAQ,MAAM,CAAC;AAAA,QAChB;AAAA,MACD;AAAA,IACD,CAAC;AAAA,EACF;AAAA,EAES,SAAS,MAAM;AACvB,SAAK,UAAU;AACf,QAAI,KAAK,OAAO,oBAAoB,EAAE,gBAAgB;AACrD,WAAK,OAAO,gBAAgB,IAAI;AAAA,IACjC;AAAA,EACD;AACD;",
  "names": []
}
